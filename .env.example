# Luthien Control Environment Configuration
# Copy this file to .env and fill in your actual values

# LLM Provider API Keys (used by the proxy to authenticate to upstream providers)
# These are the REAL API keys that the proxy uses to call OpenAI/Anthropic
OPENAI_API_KEY=your_openai_api_key_here
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Gateway Configuration
# PROXY_API_KEY: The API key that clients use to authenticate to the Luthien proxy
# Claude Code and other clients will use this key to authenticate to the proxy
PROXY_API_KEY=sk-luthien-dev-key

# ADMIN_API_KEY: The API key for admin/policy management operations
# Required for accessing /admin/* endpoints (policy configuration UI)
# Set this to a secure value in production
ADMIN_API_KEY=admin-dev-key

GATEWAY_HOST=localhost
GATEWAY_PORT=8000

# Policy Configuration
# POLICY_SOURCE: How to load and persist policies
# Options:
#   - "db": Use database only (production, UI-managed)
#   - "file": Use YAML file only (local dev, CI/CD, read-only)
#   - "db-fallback-file": Try DB first, fall back to file (recommended for production)
#   - "file-fallback-db": Try file first, fall back to DB (migration scenario)
POLICY_SOURCE=db-fallback-file

# POLICY_CONFIG: Path to YAML policy configuration file
# Used when POLICY_SOURCE includes "file"
POLICY_CONFIG=/app/config/policy_config.yaml

# PostgreSQL Configuration
POSTGRES_USER=luthien
POSTGRES_PASSWORD=luthien_dev_password
POSTGRES_DB=luthien_control
POSTGRES_PORT=5432
DATABASE_URL=postgresql://luthien:luthien_dev_password@db:5432/luthien_control

# Redis Configuration
REDIS_URL=redis://redis:6379
REDIS_PORT=6379


# Local LLM Gateway (OpenAI-compatible) for policy scoring
LOCAL_LLM_PORT=4010

# Ollama (local model host) port
OLLAMA_PORT=11434


# Test model used by local scripts (trace/sanity/tests)
# Set this to a model that exists for your API keys when calling through the proxy
# e.g., gpt-4o, gpt-4o-mini, or a local model via the local LLM gateway
TEST_MODEL=gpt-5

# OpenTelemetry Configuration
# Set to http://tempo:4317 when running with observability stack (./scripts/observability.sh up)
# Leave empty to disable tracing
OTEL_EXPORTER_OTLP_ENDPOINT=http://tempo:4317

# Grafana URL for viewing traces and logs
# Used by debug endpoints to generate links to Grafana Tempo traces
GRAFANA_URL=http://localhost:3000
